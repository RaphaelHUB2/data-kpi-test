"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const apm = require("elastic-apm-node");
function startApm() {
    const requiredVariables = [
        'ELASTIC_APM_SERVICE_NAME',
        'ELASTIC_APM_SECRET_TOKEN',
        'ELASTIC_APM_SERVER_URL',
    ];
    const errors = [];
    requiredVariables.forEach((variable) => {
        if (!process.env[variable]) {
            errors.push(`Variable ${variable} is missing from environment.`);
        }
        else if (process.env[variable] === 'xxx') {
            errors.push(`Variable ${variable} has default value 'xxx'.`);
        }
    });
    if (errors.length) {
        console.error(`[APM] Unable to start : ${JSON.stringify(errors)}`);
    }
    else {
        apm.start();
        console.log('[APM] Started');
    }
}
exports.default = startApm;
//# sourceMappingURL=apm.js.map